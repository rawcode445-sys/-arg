<!doctype html>
<html lang="fr"><head>
<meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<title>Gate 2 — SIGNAL</title>
<link rel="stylesheet" href="../../assets/css/style.css">
</head>
<body>
<div class="wrapper">
  <div class="term">
    <h2 class="title">GATE 2 — SIGNAL</h2>
    <p class="center">Stabilise le flux : déchiffre le code, révèle le visuel, puis déverrouille la newsletter.</p>

    <!-- IMAGE (brouillée jusqu'à la 1ère bonne réponse) -->
    <div style="text-align:center;margin:10px 0">
      <img id="snap" src="../../assets/img/gate2_glitch.png" style="max-width:560px;width:100%" class="blurbox" alt="glitch tee">
    </div>

    <!-- Énigme 1 : 18-1-23 -> RAW -->
    <div class="row">
      <input id="r1" placeholder="18-1-23">
      <button class="btn" id="b1">Valider</button>
    </div>
    <p id="e1" class="err">Indice : 18 = R, 1 = A, 23 = ?</p>

    <!-- Bloc qui apparaît après R1 correcte -->
    <div id="step2" style="display:none;margin-top:12px">
      <p class="center">Visuel révélé. Dernier accès requis :</p>

      <!-- Énigme 2a : RAW//____ -> CODE -->
      <div class="row">
        <input id="r2a" placeholder="Complete the code → RAW//____">
        <button class="btn" id="b2a">Valider</button>
      </div>
      <p id="e2a" class="err">Réponse attendue : 4 lettres.</p>

      <!-- Énigme 2b : 2+0+2+5 -->
      <div class="row">
        <input id="r2b" placeholder="system log: 2+0+2+5 = __">
        <button class="btn" id="b2b">Valider</button>
      </div>
      <p id="e2b" class="err">Essaie encore.</p>

      <!-- Lien Newsletter (apparaît quand r2a & r2b sont justes) -->
      <p id="nl" style="display:none" class="center">
        <a class="btn" href="https://forms.gle/s9X6GMa8PPNp8ZHK7" target="_blank" rel="noopener">ACCESS // NEWSLETTER</a>
      </p>
    </div>

  </div>
</div>

<script>
// 1) Révélation de l'image avec "RAW"
let step1ok = false, step2aok = false, step2bok = false;

document.getElementById('b1').onclick = () => {
  const v = document.getElementById('r1').value.trim().toUpperCase();
  if (v === 'RAW') {
    step1ok = true;
    document.getElementById('snap').classList.add('show');  // retire le flou
    document.getElementById('e1').style.display = 'none';
    document.getElementById('step2').style.display = 'block';
  } else {
    document.getElementById('e1').style.display = 'block';
  }
};

// 2a) RAW//____ -> CODE
document.getElementById('b2a').onclick = () => {
  const v = document.getElementById('r2a').value.trim().toUpperCase();
  if (v === 'CODE') {
    step2aok = true;
    document.getElementById('e2a').style.display = 'none';
  } else {
    document.getElementById('e2a').style.display = 'block';
  }
  document.getElementById('nl').style.display = (step2aok && step2bok) ? 'block' : 'none';
};

// 2b) 2+0+2+5 = 9
document.getElementById('b2b').onclick = () => {
  const v = document.getElementById('r2b').value.trim();
  if (v === '9') {
    step2bok = true;
    document.getElementById('e2b').style.display = 'none';
  } else {
    document.getElementById('e2b').style.display = 'block';
  }
  document.getElementById('nl').style.display = (step2aok && step2bok) ? 'block' : 'none';
};
</script>
</body>
</html>
