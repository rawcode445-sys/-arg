<!doctype html>
<html lang="fr">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Gate 2 — SIGNAL</title>
<link rel="stylesheet" href="../../assets/css/style.css?v=bgfix9">
<style>
/* Ensure inputs are long and centered; keep blur effect self-contained */
.wrapper{max-width:960px;margin:24px auto;padding:0 12px}
.term{padding:14px}
.center{text-align:center}
.row{display:grid;grid-template-columns:1fr auto;gap:8px;margin:10px 0}
.questions{display:flex;flex-direction:column;gap:10px;margin-top:12px}
.questions input{width:100%;max-width:760px;margin:0 auto;padding:10px;border-radius:8px}
.questions .row{grid-template-columns:minmax(240px,1fr) auto;justify-content:center}
.err{color:#ff5577;display:none;margin:0 0 6px}
.blurbox{filter:blur(10px);transition:filter .35s ease}
.blurbox.show{filter:blur(0)}
</style>
</head>
<body>
<div class="wrapper">
  <div class="term">
    <h2 class="title">GATE 2 — SIGNAL</h2>
    <p class="center">Stabilise le flux : déchiffre le code, révèle le visuel, puis déverrouille la newsletter.</p>

    <!-- IMAGE GLITCH (défloutée après R1 correcte) -->
    <div class="center" style="margin:10px 0">
      <img id="snap" src="../../assets/img/gate2_glitch.png" style="max-width:560px;width:100%" class="blurbox" alt="glitch tee">
    </div>

    <!-- Étape 1 : 18-1-23 -> RAW -->
    <div class="questions">
      <div class="row">
        <input id="r1" placeholder="18-1-23">
        <button class="btn" id="b1">Valider</button>
      </div>
      <p id="e1" class="err center">Indice : 18 = R, 1 = A, 23 = ?</p>
    </div>

    <!-- Étape 2 : apparaît après R1 -->
    <div id="step2" style="display:none;margin-top:12px">
      <p class="center">Visuel révélé. Dernier accès requis :</p>

      <!-- 2a : RAW//____ -> CODE -->
      <div class="row">
        <input id="r2a" placeholder="Complete the code → RAW//____">
        <button class="btn" id="b2a">Valider</button>
      </div>
      <p id="e2a" class="err center">Réponse attendue : 4 lettres.</p>

      <!-- 2b : 2+0+2+5 = 9 -->
      <div class="row">
        <input id="r2b" placeholder="system log: 2+0+2+5 = __">
        <button class="btn" id="b2b">Valider</button>
      </div>
      <p id="e2b" class="err center">Essaie encore.</p>

      <!-- Lien Newsletter (s'affiche quand 2a & 2b sont justes) -->
      <p id="nl" style="display:none" class="center">
        <a class="btn" href="https://forms.gle/s9X6GMa8PPNp8ZHK7" target="_blank" rel="noopener">ACCESS // NEWSLETTER</a>
      </p>
    </div>
  </div>
</div>

<script>
// Flow Gate 2 — v4
let s1=false, s2a=false, s2b=false;

b1.onclick=()=>{
  const v = r1.value.trim().toUpperCase();
  if(v==='RAW'){
    s1=true;
    snap.classList.add('show');   // retire le flou
    e1.style.display='none';
    step2.style.display='block';
  } else {
    e1.style.display='block';
  }
};

b2a.onclick=()=>{
  const v = r2a.value.trim().toUpperCase();
  if(v==='CODE'){ s2a=true; e2a.style.display='none'; } else { e2a.style.display='block'; }
  nl.style.display = (s2a && s2b) ? 'block' : 'none';
};

b2b.onclick=()=>{
  const v = r2b.value.trim();
  if(v==='9'){ s2b=true; e2b.style.display='none'; } else { e2b.style.display='block'; }
  nl.style.display = (s2a && s2b) ? 'block' : 'none';
};
</script>

<!-- Matrix rain background (bg-only fix) -->
<script src="../../assets/js/matrix.js?v=bgfix9" defer></script>
</body>
</html>
