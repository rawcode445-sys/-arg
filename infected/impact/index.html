<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<title>THE FIRST IMPACT OF RAW//CODE — Gate 4 (BLACKOUT + GREEN FLASH)</title>
<link rel="stylesheet" href="../../assets/css/style.css?v=bgfix9">
<style>
/* Gate 4 — BLACKOUT masks: artists 100% illisibles avant reveal */
.poster{position:relative;width:92%;max-width:900px;margin:20px auto}
.poster img{width:100%;display:block;border:1px solid rgba(255,255,255,.06);border-radius:6px}

/* Masques ultra-forts */
.poster .mask{
  position:absolute; z-index:3;
  background: rgba(0,0,0,.68); /* voile sombre puissant */
  backdrop-filter: blur(60px) saturate(130%) contrast(180%) brightness(72%);
  -webkit-backdrop-filter: blur(60px) saturate(130%) contrast(180%) brightness(72%);
  transition: opacity .7s ease, backdrop-filter .7s ease, -webkit-backdrop-filter .7s ease;
  border-radius: 14px;
  /* halo extérieur + noir interne pour supprimer toute lisibilité */
  box-shadow:
    0 14px 70px rgba(0,0,0,.98),
    0 0 190px rgba(0,0,0,.92) inset,
    0 0 60px rgba(0,0,0,.85);
  opacity: 1; display:block;
}
.poster .mask::after{
  content:""; position:absolute; inset:0; border-radius:inherit; pointer-events:none;
  background: radial-gradient(ellipse at center,
               rgba(0,0,0,.65), rgba(0,0,0,.82) 56%, rgba(0,0,0,.92) 100%);
}
.poster .mask.revealed{
  opacity:0;
  backdrop-filter: blur(0) saturate(100%) contrast(100%) brightness(100%);
  -webkit-backdrop-filter: blur(0) saturate(100%) contrast(100%) brightness(100%);
}

.questions{display:flex;flex-direction:column;gap:12px;align-items:center;margin-top:18px}
.questions .qrow{width:100%;display:flex;gap:8px;justify-content:center;align-items:center}
.questions input{width:72%;min-width:320px;max-width:900px;padding:10px 12px;border-radius:8px;border:1px solid rgba(0,255,136,0.22);background:rgba(0,0,0,.5);color:#dfffe6}
.questions button{padding:10px 14px;border-radius:8px;border:none;background:#00ff88;color:#001;cursor:pointer}

/* GREEN FLASH effect */
.flash{position:absolute;inset:0;
  background: radial-gradient(circle at center, rgba(0,255,136,0.35), rgba(0,255,136,0.08) 40%, rgba(0,255,136,0) 70%);
  box-shadow: 0 0 80px rgba(0,255,136,0.35) inset, 0 0 180px rgba(0,255,136,0.25);
  pointer-events:none; opacity:0; transition:opacity .28s ease}
.flash.on{opacity:1}

.center{text-align:center}
</style>
</head>
<body>
<div class="wrapper">
  <div class="term">
    <h2 class="title">THE FIRST IMPACT OF RAW//CODE</h2>
    <p class="center">27 NOVEMBRE 2025 — 20h</p>

    <div class="poster" id="posterWrap">
      <img id="poster" src="../../assets/img/poster-final.jpg" alt="poster">
      <!-- masks (x,y,w,h en %) — mêmes positions -->
      <div class="mask" id="m1" data-rect="66,38,34,9"></div>
      <div class="mask" id="m2" data-rect="13,52,30,11.5"></div>
      <div class="mask" id="m3" data-rect="52,63,34,11"></div>
      <div class="mask" id="m4" data-rect="9,72,44,11.5"></div>
      <div class="mask" id="m5" data-rect="53,78,36,11"></div>
      <div class="flash" id="flash"></div>
    </div>

    <div class="questions">
      <div class="qrow"><input id="q1" placeholder="Q1: RAW is a subgenre of ____ ?"><button id="b1">UNLOCK</button></div>
      <div class="qrow"><input id="q2" placeholder="Q2: Complete: RAW = distorted ____"><button id="b2">UNLOCK</button></div>
      <div class="qrow"><input id="q3" placeholder="Q3: BUILT ON BASS. FORGED IN ____."><button id="b3">UNLOCK</button></div>
      <div class="qrow"><input id="q4" placeholder="Q4: How many slashes in RAW//CODE ?"><button id="b4">UNLOCK</button></div>
      <div class="qrow"><input id="q5" placeholder="Q5: Ending style after RAW = ____"><button id="b5">UNLOCK</button></div>
    </div>
  </div>
</div>

<script>
// Position: en % du poster
function positionMasks(){
  const img = document.getElementById('poster');
  const rect = img.getBoundingClientRect();
  document.querySelectorAll('.mask').forEach(el=>{
    const [x,y,w,h] = el.dataset.rect.split(',').map(parseFloat);
    Object.assign(el.style, {
      left: (x/100)*rect.width + 'px',
      top: (y/100)*rect.height + 'px',
      width: (w/100)*rect.width + 'px',
      height: (h/100)*rect.height + 'px'
    });
  });
}
window.addEventListener('load', positionMasks);
window.addEventListener('resize', positionMasks);

// Effets
function playSound(){ const a=new Audio('../../assets/sfx/glitch.wav'); a.volume=0.7; a.play().catch(()=>{}); }
function flashOnce(){ const f=document.getElementById('flash'); f.classList.add('on'); setTimeout(()=>f.classList.remove('on'), 180); }

// Déverrouillage
function unlock(id, inputId, answers){
  const val=document.getElementById(inputId).value.trim().toUpperCase();
  const m=document.getElementById(id);
  if(answers.includes(val) && !m.classList.contains('revealed')){
    m.classList.add('revealed'); playSound(); flashOnce();
  }
}
b1.onclick=()=>unlock('m1','q1',['HARDSTYLE']);
b2.onclick=()=>unlock('m2','q2',['KICKS']);
b3.onclick=()=>unlock('m3','q3',['FIRE']);
b4.onclick=()=>unlock('m4','q4',['2']);
b5.onclick=()=>unlock('m5','q5',['UPTEMPO']);

// Debug : ?debug=1 pour voir les cadres
if(new URL(location.href).searchParams.get('debug')==='1'){
  document.querySelectorAll('.mask').forEach(m=>m.style.outline='2px dashed rgba(0,255,136,.6)');
}
</script>

<!-- Matrix rain background -->
<script src="../../assets/js/matrix.js?v=bgfix9" defer></script>
</body>
</html>
