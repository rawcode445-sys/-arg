<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<title>THE FIRST IMPACT OF RAW//CODE — Gate 4 (BLACKOUT MAX)</title>
<link rel="stylesheet" href="../../assets/css/style.css?v=bgfix9">
<style>
/* Gate 4 — BLACKOUT MAX: artists totally hidden until reveal */
.poster{position:relative;width:92%;max-width:900px;margin:20px auto}
.poster img{width:100%;display:block;border:1px solid rgba(255,255,255,.06);border-radius:6px}

/* Ultra blackout masks */
.poster .mask{
  position:absolute; z-index:3;
  background: rgba(0,0,0,.80); /* very dark veil */
  backdrop-filter: blur(75px) saturate(130%) contrast(190%) brightness(68%);
  -webkit-backdrop-filter: blur(75px) saturate(130%) contrast(190%) brightness(68%);
  transition: opacity .8s ease, backdrop-filter .8s ease, -webkit-backdrop-filter .8s ease;
  border-radius: 14px;
  box-shadow:
    0 18px 90px rgba(0,0,0,1),
    0 0 240px rgba(0,0,0,.98) inset,
    0 0 120px rgba(0,0,0,.95);
  opacity: 1; display:block;
}
.poster .mask::after{
  content:""; position:absolute; inset:0; border-radius:inherit; pointer-events:none;
  background: radial-gradient(ellipse at center,
               rgba(0,0,0,.72), rgba(0,0,0,.86) 56%, rgba(0,0,0,.96) 100%);
}
.poster .mask.revealed{
  opacity:0;
  backdrop-filter: blur(0) saturate(100%) contrast(100%) brightness(100%);
  -webkit-backdrop-filter: blur(0) saturate(100%) contrast(100%) brightness(100%);
}

.questions{display:flex;flex-direction:column;gap:12px;align-items:center;margin-top:18px}
.questions .qrow{width:100%;display:flex;gap:8px;justify-content:center;align-items:center}
.questions input{width:72%;min-width:320px;max-width:900px;padding:10px 12px;border-radius:8px;border:1px solid rgba(0,255,136,0.22);background:rgba(0,0,0,.5);color:#dfffe6}
.questions button{padding:10px 14px;border-radius:8px;border:none;background:#00ff88;color:#001;cursor:pointer}

/* green flash */
.flash{position:absolute;inset:0;
  background: radial-gradient(circle at center, rgba(0,255,136,0.28), rgba(0,255,136,0.06) 40%, rgba(0,255,136,0) 70%);
  box-shadow: 0 0 120px rgba(0,255,136,0.32) inset, 0 0 260px rgba(0,255,136,0.22);
  pointer-events:none; opacity:0; transition:opacity .28s ease}
.flash.on{opacity:1}

.center{text-align:center}
</style>
</head>
<body>
<div class="wrapper">
  <div class="term">
    <h2 class="title">THE FIRST IMPACT OF RAW//CODE</h2>
    <p class="center">27 NOVEMBRE 2025 — 20h</p>

    <div class="poster" id="posterWrap">
      <img id="poster" src="../../assets/img/poster-final.jpg" alt="poster">
      <!-- masks (x,y,w,h in %) — positions kept as requested -->
      <div class="mask" id="m1" data-rect="66,38,34,9"></div>
      <div class="mask" id="m2" data-rect="13,52,30,11.5"></div>
      <div class="mask" id="m3" data-rect="52,63,34,11"></div>
      <div class="mask" id="m4" data-rect="9,72,44,11.5"></div>
      <div class="mask" id="m5" data-rect="53,78,36,11"></div>
      <div class="flash" id="flash"></div>
    </div>

    <div class="questions">
      <div class="qrow"><input id="q1" placeholder="Q1: RAW is a subgenre of ____ ?"><button id="b1">UNLOCK</button></div>
      <div class="qrow"><input id="q2" placeholder="Q2: Complete: RAW = distorted ____"><button id="b2">UNLOCK</button></div>
      <div class="qrow"><input id="q3" placeholder="Q3: BUILT ON BASS. FORGED IN ____."><button id="b3">UNLOCK</button></div>
      <div class="qrow"><input id="q4" placeholder="Q4: How many slashes in RAW//CODE ?"><button id="b4">UNLOCK</button></div>
      <div class="qrow"><input id="q5" placeholder="Q5: Ending style after RAW = ____"><button id="b5">UNLOCK</button></div>
    </div>
  </div>
</div>

<script>
// Position masks relative to poster element
function positionMasks(){
  const img = document.getElementById('poster');
  const rect = img.getBoundingClientRect();
  document.querySelectorAll('.mask').forEach(el=>{
    const [x,y,w,h] = el.dataset.rect.split(',').map(parseFloat);
    Object.assign(el.style, {
      left: (x/100)*rect.width + 'px',
      top: (y/100)*rect.height + 'px',
      width: (w/100)*rect.width + 'px',
      height: (h/100)*rect.height + 'px'
    });
  });
}
window.addEventListener('load', positionMasks);
window.addEventListener('resize', positionMasks);

// Effects
function playSound(){ const a=new Audio('../../assets/sfx/glitch.wav'); a.volume=0.8; a.play().catch(()=>{}); }
function flashOnce(){ const f=document.getElementById('flash'); f.classList.add('on'); setTimeout(()=>f.classList.remove('on'), 200); }

// Unlock helper
function unlock(id, inputId, answers){
  const val = document.getElementById(inputId).value.trim().toUpperCase();
  const mask = document.getElementById(id);
  if(answers.includes(val) && !mask.classList.contains('revealed')){
    mask.classList.add('revealed'); playSound(); flashOnce();
  }
}
b1.onclick=()=>unlock('m1','q1',['HARDSTYLE']);
b2.onclick=()=>unlock('m2','q2',['KICKS']);
b3.onclick=()=>unlock('m3','q3',['FIRE']);
b4.onclick=()=>unlock('m4','q4',['2']);
b5.onclick=()=>unlock('m5','q5',['UPTEMPO']);

// debug outlines with ?debug=1
if(new URL(location.href).searchParams.get('debug')==='1'){
  document.querySelectorAll('.mask').forEach(m=>m.style.outline='2px dashed rgba(0,255,136,.6)');
}
</script>

<!-- Matrix background -->
<script src="../../assets/js/matrix.js?v=bgfix9" defer></script>
</body>
</html>
